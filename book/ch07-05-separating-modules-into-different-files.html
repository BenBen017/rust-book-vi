<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Separating Modules into Different Files - The Rust Programming Language</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="ferris.css">
        <link rel="stylesheet" href="theme/2018-edition.css">
        <link rel="stylesheet" href="theme/semantic-notes.css">
        <link rel="stylesheet" href="theme/listing.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust Programming Language</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="tách-modules-ra-các-file-khác-nhau"><a class="header" href="#tách-modules-ra-các-file-khác-nhau">Tách Modules ra các file khác nhau</a></h2>
<p>Cho đến nay, tất cả các ví dụ trong chương này đều định nghĩa nhiều module
trong một file. Khi các module trở nên lớn, bạn có thể muốn di chuyển định
nghĩa của chúng sang một file riêng để làm cho code dễ điều hướng hơn.</p>
<p>Lấy ví dụ, hãy bắt đầu từ code trong Listing 7-17 có nhiều module nhà hàng.
Chúng ta sẽ trích xuất các module thành các file thay vì định nghĩa tất cả các
module trong file gốc của crate. Trong trường hợp này, file gốc của crate là
<em>src/lib.rs</em>, nhưng quy trình này cũng hoạt động với binary crate mà file gốc
của crate là <em>src/main.rs</em>.</p>
<p>Đầu tiên, chúng ta sẽ trích xuất module <code>front_of_house</code> thành một file riêng.
Xóa code bên trong dấu ngoặc nhọn cho module <code>front_of_house</code>, chỉ để lại
câu lệnh <code>mod front_of_house;</code>, vì vậy <em>src/lib.rs</em> sẽ chứa code như trong
Listing 7-21. Lưu ý rằng code này sẽ không compile cho đến khi chúng ta tạo
file <em>src/front_of_house.rs</em> trong Listing 7-22.</p>
<p><span class="filename">Filename: src/lib.rs</span></p>
<pre><code class="language-rust ignore does_not_compile">mod front_of_house;

pub use crate::front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist();
}</code></pre>
<p><span class="caption">Listing 7-21: Định nghĩa module <code>front_of_house</code> mà
thân của nó sẽ nằm trong <em>src/front_of_house.rs</em></span></p>
<p>Tiếp theo, đặt code bên trong dấu ngoặc nhọn vào một file mới có tên
<em>src/front_of_house.rs</em>, như trong Listing 7-22. Compiler sẽ biết để tìm kiếm
file này vì nó đã gặp phải định nghĩa module trong file gốc của crate với tên
<code>front_of_house</code>.</p>
<p><span class="filename">Filename: src/front_of_house.rs</span></p>
<pre><code class="language-rust ignore">pub mod hosting {
    pub fn add_to_waitlist() {}
}</code></pre>
<p><span class="caption">Listing 7-22: Định nghĩa bên trong module <code>front_of_house</code>
trong <em>src/front_of_house.rs</em></span></p>
<p>Lưu ý rằng bạn chỉ cần load một file với câu lệnh <code>mod</code> <em>một lần</em> trong
module tree của bạn. Một khi compiler biết file này là một phần của project
(và biết vị trí của file trong module tree theo trí của câu lệnh <code>mod</code>), các
file khác trong project của bạn sẽ tham chiếu đến code của file đã load sử dụng
một đường dẫn tới nơi nó, như được đề cập trong phần
<a href="ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html">“Paths for Referring to an Item in the Module Tree”</a><!-- ignore -->.
Nói cách khác, <code>mod</code> <em>không</em> là một câu lệnh “include” mà bạn có thể đã thấy
trong các ngôn ngữ lập trình khác.</p>
<p>Tiếp theo, chúng ta sẽ trích xuất module <code>hosting</code> ra một file riêng. Quá trình
khác một chút vì <code>hosting</code> là một module con của <code>front_of_house</code>, không phải
là module gốc. Chúng ta sẽ đặt file cho <code>hosting</code> vào một thư mục mới có tên
là module cha của nó trong module tree, trong trường hợp này
<em>src/front_of_house/</em>.</p>
<p>Để bắt đầu di chuyển <code>hosting</code>, chúng ta sẽ thay đổi <em>src/front_of_house.rs</em>
để chỉ chứa định nghĩa của module <code>hosting</code>:</p>
<p><span class="filename">Filename: src/front_of_house.rs</span></p>
<pre><code class="language-rust ignore">pub mod hosting;</code></pre>
<p>Sau đó, chúng ta sẽ tạo một thư mục <em>src/front_of_house</em> và một file
<em>hosting.rs</em> để chứa các định nghĩa được tạo trong module <code>hosting</code>:</p>
<p><span class="filename">Filename: src/front_of_house/hosting.rs</span></p>
<pre><code class="language-rust ignore">pub fn add_to_waitlist() {}</code></pre>
<p>Nếu chúng ta đặt <em>hosting.rs</em> trong thư mục <em>src</em>, compiler sẽ mong đợi code
<em>hosting.rs</em> nằm trong module <code>hosting</code> được định nghĩa ở crate root, chớ
không phải là một module con của module <code>front_of_house</code>. Quy tắc của
compiler về việc kiểm tra các file để tìm code của các module có nghĩa là các
thư mục và các file sẽ gần với module tree hơn.</p>
<section class="note" aria-role="note">
<h3 id="alternate-file-paths"><a class="header" href="#alternate-file-paths">Alternate File Paths</a></h3>
<p>Đến đây chúng ta đã tìm hiểu về đường dẫn file mà Rust compiler sử dụng,
nhưng Rust cũng hỗ trợ một kiểu cũ hơn của đường dẫn file. Với một module
được đặt tên là <code>front_of_house</code> được định nghĩa ở crate root, compiler sẽ
tìm code của module trong:</p>
<ul>
<li><em>src/front_of_house.rs</em> (như chúng ta đã tìm hiểu)</li>
<li><em>src/front_of_house/mod.rs</em> (kiểu cũ, đường dẫn vẫn được hỗ trợ)</li>
</ul>
<p>Với một module được đặt tên là <code>hosting</code> là một module con của
<code>front_of_house</code>, compiler sẽ tìm code của module trong:</p>
<ul>
<li><em>src/front_of_house/hosting.rs</em> (như chúng ta đã tìm hiểu)</li>
<li><em>src/front_of_house/hosting/mod.rs</em> (kiểu cũ, đường dẫn vẫn được hỗ trợ)</li>
</ul>
<p>Nếu bạn sử dụng cả hai kiểu đường dẫn cho cùng một module, bạn sẽ nhận được
một lỗi từ compiler. Sử dụng cả hai kiểu đường dẫn cho các module khác nhau
trong cùng một dự án được cho phép, nhưng có thể gây khó hiểu cho những người
làm việc trên dự án.</p>
<p>Điểm yếu chính của kiểu đường dẫn sử dụng các file có tên <em>mod.rs</em> là dự án
của bạn có thể kết thúc với nhiều file có tên <em>mod.rs</em>, có thể gây khó hiểu
khi bạn mở chúng cùng lúc trong trình soạn thảo.</p>
</section>
<p>Chúng ta đã chuyển code của mỗi module vào một file riêng biệt, và cây module
vẫn giữ nguyên. Các lời gọi hàm trong <code>eat_at_restaurant</code> vẫn hoạt động mà không
cần sửa đổi gì, ngay cả khi các định nghĩa được đặt trong các file khác nhau.
Kỹ thuật này cho phép bạn chuyển các module sang các file mới khi chúng tăng
kích thước.</p>
<p>Lưu ý rằng câu lệnh <code>pub use crate::front_of_house::hosting</code> trong <em>src/lib.rs</em>
cũng không thay đổi, và <code>use</code> cũng không ảnh hưởng gì đến việc file nào được
biên dịch là một phần của crate. Câu lệnh <code>mod</code> khai báo module, và Rust sẽ tìm
file có cùng tên với module để tìm code của module đó.</p>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>Rust cho phép bạn chia một package thành nhiều crate và một crate thành các
module để bạn có thể tham chiếu đến các item được định nghĩa trong một module
từ một module khác. Bạn có thể làm điều này bằng cách chỉ định đường dẫn tuyệt
đối hoặc tương đối. Những đường dẫn này có thể được đưa vào scope bằng
lệnh <code>use</code> để bạn có thể sử dụng một đường dẫn ngắn hơn cho nhiều lần sử dụng
của item trong scope đó. Code của module mặc định là private, nhưng bạn có
thể làm các item public bằng cách thêm từ khóa <code>pub</code>.</p>
<p>Trong chương tiếp theo, chúng ta sẽ xem một số cấu trúc dữ liệu tập hợp trong
thư viện chuẩn mà bạn có thể sử dụng trong code của bạn được tổ chức một cách
rõ ràng.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch07-04-bringing-paths-into-scope-with-the-use-keyword.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="ch08-00-common-collections.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch07-04-bringing-paths-into-scope-with-the-use-keyword.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="ch08-00-common-collections.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="ferris.js"></script>



    </div>
    </body>
</html>
